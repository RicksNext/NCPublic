const textBright="#F0F0F3",lineColor="#707073",socialColor="#7e08ec",maxPoints=500,chart=new Highcharts.chart({chart:{renderTo:"chart",type:"spline",zoomType:"x",backgroundColor:"transparent",plotBorderColor:"transparent"},title:{text:""},xAxis:{type:"datetime",tickPixelInterval:500,gridLineColor:"#707073",labels:{style:{color:"#F0F0F3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#F0F0F3"}}},yAxis:{title:{text:""},gridLineColor:"#707073",labels:{style:{color:"#F0F0F3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073"},credits:{enabled:!0,text:"NextCounts",href:"https://nextcounts.com"},series:[{showInLegend:!1,name:"Followers",marker:{enabled:!1},color:"#7e08ec",lineColor:"#7e08ec"}]});function calcTime(){var e=new Date,t=e.getTime(),n=-1*e.getTimezoneOffset()*6e4;return new Date(t+n).getTime()}const queryString=window.location.search,urlParams=new URLSearchParams(queryString),userInURL=urlParams.get("u"),odometerInURL=urlParams.get("o");user=userInURL||"ninja",odometerInURL&&0!=odometerInURL&&"normal"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer.css">'),"1"!=odometerInURL&&"fast"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast.css">'),"2"!=odometerInURL&&"ncolored"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-colored.css">'),"3"!=odometerInURL&&"fcolored"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast-colored.css">');var updateChart=!0,bannerCurrent=1,hasBanner=!0;function searchForUser(){var e=searchBar.value.replace("@",""),t="";if(e.includes("https://")||e.includes("http://")){var n=e.split("/");t=n[3]}else if(!e.includes("https://")||!e.includes("http://"))if(e.includes("twitch.tv")){n=e.split("/");t=n[1]}else t=e;$.ajax({url:"https://api.nextcounts.com/api/twitch/user/"+t,type:"GET",dataType:"JSON",success:function(e){e.error?(searchUsername.innerHTML="User not found.",searchBottomtext.innerHTML="Please check if the spelling is correct and try again."):(1==e.partner?searchUsername.innerHTML=e.username+' <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none"><path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>':searchUsername.innerHTML=e.username,searchPfp.src=e.pfp,searchBottomtext.innerHTML=e.followers.toLocaleString()+" Followers",searchUsername.title=t,searchUserBox.style.cursor="pointer")},error:function(){searchUsername.innerHTML="Our API seems to be down right now.",searchBottomtext.innerHTML="Please try again later."}})}function loadDataFirstTime(){$.ajax({url:"https://api.nextcounts.com/api/twitch/user/"+user,type:"GET",dataType:"JSON",success:function(e){e.error?(toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-left",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1500",timeOut:"7000",extendedTimeOut:"2500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.error("It seems like the user you requested doesn't exist. Please check if the @ of the user is correct.","Uh oh...")):(1==e.partner?updateCounts.name(e.username+' <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none"><path d="M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>'):updateCounts.name(e.username),updateCounts.pfp(e.pfp),e.channelBanner&&null!==e.channelBanner?(updateCounts.banner(e.channelBanner),hasBanner=!0):(updateCounts.banner("hide"),hasBanner=!1),updateCounts.mainCount(e.followers),updateCounts.views(e.views),updateCounts.goalCount(e.followers),followUserBtn.href=e.url,setInterval((function(){$.ajax({url:"https://api.nextcounts.com/api/twitch/user/"+user,type:"GET",dataType:"JSON",success:function(e){e.error||(updateCounts.mainCount(e.followers),updateCounts.views(e.views),updateCounts.goalCount(e.followers))}})}),7500))},error:function(){toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-left",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1500",timeOut:"7000",extendedTimeOut:"2500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.error("It seems like our system is currently down for some unknown reason. Please message us on Twitter (@NextCounts) so we can quickly fix this issue.","Uh oh...")}})}$("#applyChangesCustomize").click((function(){"fast"==odometerSelector.value?($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast.css">')):"ncolored"==odometerSelector.value?($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-colored.css">')):"fcolored"==odometerSelector.value?($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast-colored.css">')):"normal"==odometerSelector.value&&($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer.css">')),disableChart.checked&&(chart.series[0].setData([]),updateChart=!1,document.getElementById("chart").style.display="none"),disableChart.checked||0!=updateChart||(document.getElementById("chart").style.display="block",updateChart=!0),hideBanner.checked&&1==hasBanner&&(document.getElementById("userBanner").style.opacity="0",document.getElementById("userImg").style.marginTop="-80px",bannerCurrent=0),hideBanner.checked||0!=bannerCurrent||1!=hasBanner||(document.getElementById("userBanner").style.opacity="1",document.getElementById("userImg").style.marginTop="0px",bannerCurrent=1)})),document.getElementById("searchBar").addEventListener("keyup",(function(e){13===e.keyCode&&searchForUser()})),$("#searchBtn").click((function(){searchForUser()})),loadDataFirstTime();var updateCounts={name:function(e){document.getElementById("username").innerHTML=e},pfp:function(e){document.getElementById("userImg").src=e},banner:function(e){"hide"==e?(document.getElementById("userBanner").style.opacity="0",document.getElementById("userImg").style.marginTop="-80px"):document.getElementById("userBanner").src=e},mainCount:function(e){document.getElementById("mainOdometer").innerHTML=e,1==updateChart&&(chart.series[0].points.length>=500&&chart.series[0].data[0].remove(),chart.series[0].addPoint([calcTime(),e]))},goalCount:function(e){if(e<10)var t=10;var n=Math.floor(Math.log10(e));t=Math.ceil(e/10**n)*10**n-e;document.getElementById("goalOdo").innerHTML=t},views:function(e){document.getElementById("viewsOdo").innerHTML=e}};
