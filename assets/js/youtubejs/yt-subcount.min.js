const textBright="#F0F0F3",lineColor="#707073",socialColor="#ff0000",maxPoints=900,chart=new Highcharts.chart({chart:{renderTo:"chart",type:"spline",zoomType:"x",backgroundColor:"transparent",plotBorderColor:"transparent"},title:{text:""},xAxis:{type:"datetime",tickPixelInterval:500,gridLineColor:"#707073",labels:{style:{color:"#F0F0F3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073",title:{style:{color:"#F0F0F3"}}},yAxis:{title:{text:""},gridLineColor:"#707073",labels:{style:{color:"#F0F0F3"}},lineColor:"#707073",minorGridLineColor:"#505053",tickColor:"#707073"},credits:{enabled:!0,text:"NextCounts",href:"https://nextcounts.com"},series:[{showInLegend:!1,name:"Subscribers",marker:{enabled:!1},color:"#ff0000",lineColor:"#ff0000"}]});function calcTime(){var e=new Date,t=e.getTime(),r=-1*e.getTimezoneOffset()*6e4;return new Date(t+r).getTime()}const queryString=window.location.search,urlParams=new URLSearchParams(queryString),userInURL=urlParams.get("u"),providerInURL=Number(urlParams.get("p")),odometerInURL=urlParams.get("o");var selectedProvider=0;user=userInURL||"UCL-t6GiYdYgOgDdFVVx5G0w",odometerInURL&&0!=odometerInURL&&"normal"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer.css">'),"1"!=odometerInURL&&"fast"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast.css">'),"2"!=odometerInURL&&"ncolored"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-colored.css">'),"3"!=odometerInURL&&"fcolored"!=odometerInURL||$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast-colored.css">');var updateChart=!0,bannerCurrent=1,hasBanner=!0;$("#applyChangesCustomize").click((function(){"fast"==odometerSelector.value?($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast.css">')):"ncolored"==odometerSelector.value?($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-colored.css">')):"fcolored"==odometerSelector.value?($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer-fast-colored.css">')):"normal"==odometerSelector.value&&($("link#odometerCSS").remove(),$("head").append('<link rel="stylesheet" type="text/css" id="odometerCSS" href="https://nextcounts.com/assets/css/global/odometer.css">')),disableChart.checked&&(chart.series[0].setData([]),updateChart=!1,document.getElementById("chart").style.display="none"),disableChart.checked||0!=updateChart||(document.getElementById("chart").style.display="block",updateChart=!0),countsSelector.value!==currentProvider&&(chart.series[0].setData([]),currentProvider=countsSelector.value)})),document.getElementById("searchBar").addEventListener("keyup",(function(e){13===e.keyCode&&searchForUser()})),$("#searchBtn").click((function(){searchForUser()})),$("#searchUserBox").click((function(){location.href=`/youtube/subscribers/?u=${document.getElementById("searchUsername").title}&p=${searchProvider}`})),$("#subscribeBtn").click((function(){parent.open("https://youtube.com/channel/"+user)}));var searchProvider=0,currentProvider=0;function searchForUser(){var e=searchBar.value,t="",r=providerSearch.value;if(e.includes("https://")||e.includes("http://"))e.includes("youtube.com/channel/")&&(t=e.split("/")[4]);else if(!e.includes("https://")||!e.includes("http://")){if(e.includes("youtube.com/channel/"))t=e.split("/")[2];else t=e}$.ajax({url:"https://api.nextcounts.com/api/youtube/channel/search/"+t,type:"GET",dataType:"JSON",success:function(e){e.error?(searchUsername.innerHTML="Channel not found.",searchBottomtext.innerHTML="Please check if the spelling is correct and try again."):(0==r&&$.ajax({url:"https://api.nextcounts.com/api/youtube/channel/"+e.cid,type:"GET",dataType:"JSON",success:function(t){t.error?(searchUsername.innerHTML="Channel not found.",searchBottomtext.innerHTML="Please check if the spelling is correct and try again."):(searchUsername.innerHTML=t.username,searchPfp.src=t.userImg,searchBottomtext.innerHTML=t.subcount.toLocaleString()+" Subscribers",searchUsername.title=e.cid,searchProvider=0,searchUserBox.style.cursor="pointer")},error:function(){searchUsername.innerHTML="Our API seems to be down right now.",searchBottomtext.innerHTML="Please try again later."}}),1==r&&$.ajax({url:"https://api.mixerno.space/youtube/estimated/user/"+e.cid,type:"GET",dataType:"JSON",success:function(t){t.msg?(searchUsername.innerHTML="Channel isn't estimated by Mixerno.",searchBottomtext.innerHTML="There's nothing we can do."):(searchUsername.innerHTML=t.name,searchPfp.src=t.image,searchBottomtext.innerHTML=t.SubscriberCount.toLocaleString()+" Subscribers",searchUsername.title=e.cid,searchProvider=1,searchUserBox.style.cursor="pointer")},error:function(){searchUsername.innerHTML="Mixerno's API seems to be down right now.",searchBottomtext.innerHTML="Please try again later."}}),2==r&&$.ajax({url:`https://api.livecounts.me/est/youtube/${e.cid}/1456907299/6681084873`,type:"GET",dataType:"JSON",success:function(t){t.cname?(searchUsername.innerHTML=t.cname,searchPfp.src=t.cimage,searchBottomtext.innerHTML=t.subscriberCount.toLocaleString()+" Subscribers",searchUsername.title=e.cid,searchProvider=2,searchUserBox.style.cursor="pointer"):(searchUsername.innerHTML="Channel isn't estimated by T1ch.",searchBottomtext.innerHTML="There's nothing we can do.")},error:function(){searchUsername.innerHTML="T1ch's API seems to be down right now.",searchBottomtext.innerHTML="Please try again later."}}),3==r&&$.ajax({url:"https://api.nextcounts.com/api/youtube/channel/estimate/livecountsio/"+e.cid,type:"GET",dataType:"JSON",success:function(t){t.error?(searchUsername.innerHTML="Channel isn't estimated by Livecounts.io",searchBottomtext.innerHTML="There's nothing we can do."):(searchUsername.innerHTML=e.displayName,searchPfp.src=e.pfp,searchBottomtext.innerHTML=t.estimatedSubCount.toLocaleString()+" Subscribers",searchUsername.title=e.cid,searchProvider=3,searchUserBox.style.cursor="pointer")},error:function(){searchUsername.innerHTML="Livecounts.io's API seems to be down right now.",searchBottomtext.innerHTML="Please try again later."}}),4==r&&$.ajax({url:"https://estimates.ncinsiders.live/est/youtube/"+e.cid,type:"GET",dataType:"JSON",success:function(t){t.msg?(searchUsername.innerHTML="Channel isn't estimated by us.",searchBottomtext.innerHTML="If the user has more than 100k subs, try again."):(searchUsername.innerHTML=t.channelName,searchPfp.src=t.channelImage,searchBottomtext.innerHTML=t.estimatedCount.toLocaleString()+" Subscribers",searchUsername.title=e.cid,searchProvider=4,searchUserBox.style.cursor="pointer")},error:function(){searchUsername.innerHTML="Our Estimated API seems to be down.",searchBottomtext.innerHTML="Please try again later."}}))},error:function(){searchUsername.innerHTML="Our API seems to be down right now.",searchBottomtext.innerHTML="Please try again later."}})}function loadDataFirstTime(){currentProvider=providerInURL||0,$.ajax({url:"https://api.nextcounts.com/api/youtube/channel/"+user,type:"GET",dataType:"JSON",success:function(e){e.error?(toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-left",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1500",timeOut:"7000",extendedTimeOut:"2500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.error("It seems like the user you requested doesn't exist. Please check if the @ of the user is correct.","Uh oh...")):(updateCounts.name(e.username),updateCounts.pfp(e.userImg),""!==e.userBanner&&void 0!==e.userBanner?updateCounts.banner(e.userBanner):(updateCounts.banner("hide"),hasBanner=!1),setInterval((function(){0==currentProvider&&$.ajax({url:"https://api.nextcounts.com/api/youtube/channel/"+user,type:"GET",dataType:"JSON",success:function(e){e.error||(updateCounts.mainCount(e.subcount),updateCounts.views(e.viewcount),updateCounts.videos(e.videos))}}),1==currentProvider&&$.ajax({url:"https://api.mixerno.space/youtube/estimated/user/"+user,type:"GET",dataType:"JSON",success:function(e){e.msg||(updateCounts.mainCount(e.SubscriberCount),updateCounts.views(e.totalviews),updateCounts.videos(e.videos))}}),2==currentProvider&&$.ajax({url:`https://api.livecounts.me/est/youtube/${user}/1456907299/6681084873`,type:"GET",dataType:"JSON",success:function(e){e.error||updateCounts.mainCount(e.subscriberCount)}}),3==currentProvider&&$.ajax({url:"https://api.nextcounts.com/api/youtube/channel/estimate/livecountsio/"+user,type:"GET",dataType:"JSON",success:function(e){e.error||(updateCounts.mainCount(e.estimatedSubCount),updateCounts.views(e.views),updateCounts.videos(e.videos))}}),4==currentProvider&&($.ajax({url:"https://estimates.ncinsiders.live/est/youtube/"+user,type:"GET",dataType:"JSON",success:function(e){e.error||updateCounts.mainCount(e.estimatedCount)}}),setInterval((function(){$.ajax({url:"https://api.nextcounts.com/api/youtube/channel/"+user,type:"GET",dataType:"JSON",success:function(e){e.error||(updateCounts.views(e.viewcount),updateCounts.videos(e.videos))}})}),6e4))}),2e3))},error:function(){toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-left",preventDuplicates:!0,onclick:null,showDuration:"300",hideDuration:"1500",timeOut:"7000",extendedTimeOut:"2500",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr.error("It seems like our system is currently down for some unknown reason. Please message us on Twitter (@NextCounts) so we can quickly fix this issue.","Uh oh...")}})}loadDataFirstTime();var updateCounts={name:function(e){document.getElementById("username").innerHTML=e},pfp:function(e){document.getElementById("userImg").src=e},banner:function(e){"hide"==e?(document.getElementById("userBanner").style.opacity="0",document.getElementById("userImg").style.marginTop="-80px"):document.getElementById("userBanner").src=e},mainCount:function(e){e>=1&&(document.getElementById("mainOdometer").innerHTML=e,1==updateChart&&(chart.series[0].points.length>=900&&chart.series[0].data[0].remove(),chart.series[0].addPoint([calcTime(),e])))},views:function(e){document.getElementById("viewsOdo").innerHTML=e},videos:function(e){document.getElementById("videosOdo").innerHTML=e}};
